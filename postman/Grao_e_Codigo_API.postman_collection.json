{
  "info": {
    "name": "Gr√£o & C√≥digo API",
    "description": "Collection para a prova pr√°tica de desenvolvedores Junior.\n\n‚òï API de gest√£o de uma cafeteria gourmet.\n\n**Se√ß√µes:**\n- üîç Explora√ß√£o: Rotas seguras para testes\n- üö© CTF: Rotas vulner√°veis a SQL Injection\n- üêõ Buggy: Rotas com bugs para corre√ß√£o",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000"
    }
  ],
  "item": [
    {
      "name": "üè† Health Check",
      "item": [
        {
          "name": "Home",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/"
          }
        },
        {
          "name": "API Docs",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/docs"
          }
        }
      ]
    },
    {
      "name": "üîç Explora√ß√£o - Produtos",
      "item": [
        {
          "name": "Listar Todos Produtos",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/products"
          }
        },
        {
          "name": "Filtrar por Categoria",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products?category=1",
              "host": ["{{base_url}}"],
              "path": ["api", "products"],
              "query": [
                { "key": "category", "value": "1" }
              ]
            }
          }
        },
        {
          "name": "Filtrar por Pre√ßo",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/products?minPrice=10&maxPrice=50",
              "host": ["{{base_url}}"],
              "path": ["api", "products"],
              "query": [
                { "key": "minPrice", "value": "10" },
                { "key": "maxPrice", "value": "50" }
              ]
            }
          }
        },
        {
          "name": "Buscar Produto por ID",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/products/1"
          }
        },
        {
          "name": "Criar Produto",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/products",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Caf√© Gelado Premium\",\n    \"description\": \"Caf√© gelado com leite condensado\",\n    \"price\": 16.00,\n    \"stock\": 30,\n    \"category_id\": 2\n}"
            }
          }
        },
        {
          "name": "Atualizar Produto",
          "request": {
            "method": "PUT",
            "url": "{{base_url}}/api/products/1",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"price\": 8.00,\n    \"stock\": 150\n}"
            }
          }
        },
        {
          "name": "Deletar Produto (Soft Delete)",
          "request": {
            "method": "DELETE",
            "url": "{{base_url}}/api/products/1"
          }
        }
      ]
    },
    {
      "name": "üîç Explora√ß√£o - Categorias",
      "item": [
        {
          "name": "Listar Categorias",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/categories"
          }
        },
        {
          "name": "Categoria com Produtos",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/categories/1"
          }
        },
        {
          "name": "Criar Categoria",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/categories",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Especiais\",\n    \"description\": \"Produtos especiais da casa\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "üîç Explora√ß√£o - Usu√°rios",
      "item": [
        {
          "name": "Listar Usu√°rios",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/users"
          }
        },
        {
          "name": "Filtrar por Cargo",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/users?role=barista",
              "host": ["{{base_url}}"],
              "path": ["api", "users"],
              "query": [
                { "key": "role", "value": "barista" }
              ]
            }
          }
        },
        {
          "name": "Buscar Usu√°rio por ID",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/users/3"
          }
        }
      ]
    },
    {
      "name": "üîç Explora√ß√£o - Pedidos",
      "item": [
        {
          "name": "Listar Pedidos",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/orders"
          }
        },
        {
          "name": "Filtrar por Status",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/orders?status=delivered",
              "host": ["{{base_url}}"],
              "path": ["api", "orders"],
              "query": [
                { "key": "status", "value": "delivered" }
              ]
            }
          }
        },
        {
          "name": "Detalhes do Pedido",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/orders/1"
          }
        },
        {
          "name": "Criar Pedido",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/orders",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": 5,\n    \"items\": [\n        { \"product_id\": 1, \"quantity\": 2 },\n        { \"product_id\": 2, \"quantity\": 1 },\n        { \"product_id\": 13, \"quantity\": 1 }\n    ],\n    \"notes\": \"Sem a√ß√∫car no caf√©\"\n}"
            }
          }
        },
        {
          "name": "Atualizar Status",
          "request": {
            "method": "PATCH",
            "url": "{{base_url}}/api/orders/1/status",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"preparing\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "üîç Explora√ß√£o - Autentica√ß√£o",
      "item": [
        {
          "name": "Login (Seguro)",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/auth/login",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"barista_joao\",\n    \"password\": \"cafezinho\"\n}"
            }
          }
        },
        {
          "name": "Login Admin",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/auth/login",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin\",\n    \"password\": \"admin123\"\n}"
            }
          }
        },
        {
          "name": "Registrar Usu√°rio",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/auth/register",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"novo_barista\",\n    \"password\": \"senha123456\",\n    \"email\": \"novo@cafeteria.com\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "üö© CTF - SQL Injection",
      "description": "‚ö†Ô∏è ROTAS VULNER√ÅVEIS - Use para aprender sobre SQL Injection",
      "item": [
        {
          "name": "Ver Desafios CTF",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/vulnerable/flags"
          }
        },
        {
          "name": "Busca Normal",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/vulnerable/search?q=caf√©",
              "host": ["{{base_url}}"],
              "path": ["api", "vulnerable", "search"],
              "query": [
                { "key": "q", "value": "caf√©" }
              ]
            }
          }
        },
        {
          "name": "Busca - Teste de Vulnerabilidade",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/vulnerable/search?q='",
              "host": ["{{base_url}}"],
              "path": ["api", "vulnerable", "search"],
              "query": [
                { "key": "q", "value": "'" }
              ]
            }
          }
        },
        {
          "name": "Busca - OR Injection",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/vulnerable/search?q=' OR '1'='1",
              "host": ["{{base_url}}"],
              "path": ["api", "vulnerable", "search"],
              "query": [
                { "key": "q", "value": "' OR '1'='1" }
              ]
            }
          }
        },
        {
          "name": "Login Vulner√°vel - Normal",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/vulnerable/login",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin\",\n    \"password\": \"senha_errada\"\n}"
            }
          }
        },
        {
          "name": "Login Vulner√°vel - Bypass",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/vulnerable/login",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin' --\",\n    \"password\": \"qualquer\"\n}"
            }
          }
        },
        {
          "name": "Produto Vulner√°vel - Normal",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/vulnerable/product/1"
          }
        },
        {
          "name": "Usu√°rios Vulner√°vel - Ver Todos",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/vulnerable/users?role=' OR '1'='1",
              "host": ["{{base_url}}"],
              "path": ["api", "vulnerable", "users"],
              "query": [
                { "key": "role", "value": "' OR '1'='1" }
              ]
            }
          }
        },
        {
          "name": "Order By Vulner√°vel",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/api/vulnerable/order?sort=price",
              "host": ["{{base_url}}"],
              "path": ["api", "vulnerable", "order"],
              "query": [
                { "key": "sort", "value": "price" }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üêõ Buggy - Corre√ß√£o de Bugs",
      "description": "Rotas com bugs propositais para corre√ß√£o",
      "item": [
        {
          "name": "Lista de Bugs",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/buggy"
          }
        },
        {
          "name": "Bug #1 - Compara√ß√£o de Tipos",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/buggy/products"
          }
        },
        {
          "name": "Bug #2 - C√°lculo Total",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/buggy/total/1"
          }
        },
        {
          "name": "Bug #3 - Async/Await (Criar)",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/buggy/order",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"user_id\": 5,\n    \"items\": [\n        { \"product_id\": 1, \"quantity\": 2 },\n        { \"product_id\": 2, \"quantity\": 1 }\n    ]\n}"
            }
          }
        },
        {
          "name": "Bug #4 - Off-by-One Ranking",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/buggy/ranking"
          }
        },
        {
          "name": "Bug #5 - Valida√ß√£o (Desconto Negativo)",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/buggy/discount",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"product_id\": 1,\n    \"discount_percent\": -50\n}"
            }
          }
        },
        {
          "name": "Bug #5 - Valida√ß√£o (Desconto 150%)",
          "request": {
            "method": "POST",
            "url": "{{base_url}}/api/buggy/discount",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"product_id\": 1,\n    \"discount_percent\": 150\n}"
            }
          }
        },
        {
          "name": "Bug #6 - Escopo de Vari√°vel",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/api/buggy/summary"
          }
        }
      ]
    }
  ]
}
